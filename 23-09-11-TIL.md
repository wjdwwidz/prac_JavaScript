---
layout: post
title: "[230911] npmê³¼ Module, Express"
subtitle: "[JavaScript]"
date: 2023-09-12 02:30
categories: ["TIL"]
background: 
tag: [Express, npm, Module, JavaScript]
---

# [230911] npmê³¼ ëª¨ë“ˆ, Express

---

# 01 NPMê³¼ ëª¨ë“ˆ

## 01) NPM : (Node Package Manager)

**Node.js í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ” í•„ìˆ˜ì ì¸ ë„êµ¬**

â‡’ NPM ì˜¨ë¼ì¸ì €ì¥ì†Œ : ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ , ë„êµ¬ë“¤ì´ ì—…ë¡œë“œë˜ëŠ” ì¥ì†Œ

â‡’ NPM ì»¤ë§¨ë“œë¼ì¸ ë„êµ¬ : ëª…ë ¹ì–´ ì œê³µ 

## 02) NPMì‚¬ìš©í•´ë³´ê¸°

`$npm init` : í”„ë¡œì íŠ¸ ë””ë ‰í„°ë¦¬ë¥¼ ìƒì„±í•˜ê³ , í•´ë‹¹ ë””ë ‰í„°ë¦¬ ì•ˆì—ì„œ `npm init`ì´ë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´, `package.json`ì´ë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ê³  ì´ ë””ë ‰í„°ë¦¬ëŠ” `Node.js` í”„ë¡œì íŠ¸ê°€ ë¨

package.json : version, name, descrpition, scripts â€¦ 

í”„ë¡œì íŠ¸ê°€ ì‹¤í–‰ë˜ê¸° ìœ„í•´ ë¼ì´ë¸ŒëŸ¬ì´ì— ì˜ì¡´í•œë‹¤. â‡’ ì˜ì¡´ì„±

npm install ëª…ë ¹ì–´ë¥¼ í†µí•´ í”„ë¡œì íŠ¸ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ

- `npm install [package-name]` :
    - í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ í”„ë¡œì íŠ¸ì— ì¶”ê°€í•  ìˆ˜ ìˆìŒ (=ì˜ì¡´ì„± ì¶”ê°€)
    (node_modules ë””ë ‰í„°ë¦¬ì— ì €ì¥í•˜ê¸° ìœ„í•¨)
    
    `package.json` ì˜ `dependencies`ì•ˆì— ì¶”ê°€ë˜ë©° `node_modules` ë””ë ‰í„°ë¦¬ì— ì €ì¥ë¨
    
    ( `node_modules` ë””ë ‰í„°ë¦¬ëŠ” ì½”ë“œ ê´€ë¦¬ë‚˜ ë°°í¬ì‹œì— ì—…ë¡œë“œ í•˜ì§€ ì•ŠìŒ)
    
- `npm install [package-name] â€”save-dev`
    - ê°œë°œìš© ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ
    - ê°œë°œìš© ì˜ì¡´ì„± : ë°°í¬ ì „ê¹Œì§€ë§Œ ì‚¬ìš©í•˜ëŠ” ì˜ì¡´ì„±
    - `devDependencies`ì— ì¶”ê°€ëœë‹¤
- `npm install [package-name] -global` ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ì „ì—­ ì €ì¥ì†Œì— ì €ì¥
- `npm install â€”production` ê°œë°œìš© ì˜ì¡´ì„±ì„ ì œì™¸í•˜ê³  ì„¤ì¹˜

![Untitled](%5B230911%5D%20npm%E1%84%80%E1%85%AA%20%E1%84%86%E1%85%A9%E1%84%83%E1%85%B2%E1%86%AF,%20Express%20810f68d91f5140cc8809a535758d22cd/Untitled.png)

## 03) NPX

**npmíŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì§€ì•Šê³  ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë„êµ¬**

í”„ë¡œì íŠ¸ì— ì¶”ê°€í•˜ê±°ë‚˜ ì „ì—­ íŒ¨í‚¤ì§€ë¡œ ì¶”ê°€í•˜ì§€ ì•Šê³  `npx`ë¥¼ ì´ìš©í•˜ì—¬ ë°”ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŒ

- `NPX - github gist`
    - gistëŠ” githubì— ë“±ë¡ëœ ê°„ë‹¨í•œ ì½”ë“œì¡°ê°
    - npxë¥¼ ì´ìš©í•˜ë©´ gistì½”ë“œë¥¼ ë‹¤ìš´ë°›ì§€ ì•Šê³  ë°”ë¡œ ì‹¤í–‰ (ë°°í¬ëœ ì˜ˆì œì½”ë“œ ë“±)

## 04) Node.js ì˜ ëª¨ë“ˆ

ëª¨ë“ˆì€ ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ê¸° ìœ„í•œ ë°©ë²• 

(ex) Bë¼ëŠ” ì½”ë“œê°€ í•œ í”„ë¡œì íŠ¸ ë‚´ì—ì„œ ë°˜ë³µ â‡’Bë¥¼ ë¶„ë¦¬í•˜ì—¬ ëª¨ë“ˆë¡œ ì‚¬ìš©)

íŒ¨í‚¤ì§€ëŠ” ëª¨ë“ˆì˜ ëª¨ìŒ(ex) NPMíŒ¨í‚¤ì§€ëŠ” ë§ì€ ëª¨ë“ˆì„ í¬í•¨í•˜ê³  ìˆëŠ” ì½”ë“œ ëª¨ìŒ)

`module.exports =` ë¥¼ í†µí•´ ëª¨ë“ˆì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤

*Node.jsëŠ” ë‹¤ì–‘í•œ ëª¨ë“ˆì„ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µ , but ê¸°ë³¸ì œê³µ ëª¨ë“ˆì€ ë§¤ìš° ì–´ë µë‹¤..*

*ë”°ë¼ì„œ ìì£¼ ì‚¬ìš©ë˜ëŠ” ê¸°ë³¸ì œê³µ ëª¨ë“ˆì„ í•™ìŠµí•´ì•¼ í•œë‹¤.*

### **console**

consoleê³¼ ìœ ì‚¬í•œ ë””ë²„ê¹… ë¡œê·¸

console.log,warn, errorâ€¦

### **process**

arch , argv, env ë“± ì‹¤í–‰ í™˜ê²½ ë° ë³€ìˆ˜ ê´€ë ¨ ê°’ ì œê³µ

abort, kill, exit ë“± í”„ë¡œì„¸ìŠ¤ ë™ì‘ ê´€ë ¨ í•¨ìˆ˜ ì œê³µ

### -fs

íŒŒì¼ ì…ì¶œë ¥ì„ ìœ„í•´ ì‚¬ìš©

readFile, writeFileí•¨ìˆ˜ë¡œ íŒŒì¼ ì½ê¸°, ì“°ê¸°

watchë¡œ íŒŒì¼/ë””ë ‰í„°ë¦¬ ë³€ê²½ ì´ë²¤íŠ¸ ê°ì§€

### -http

http ì„œë²„, í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•´ ì‚¬ìš©

createServer í•¨ìˆ˜ë¡œ ì„œë²„ ìƒì„±

Requestí•¨ìˆ˜ë¡œ httpìš”ì²­ ìƒì„±

## 05) ëª¨ë“ˆì˜ ì‘ì„±ê³¼ ì‚¬ìš©

- `require`í•¨ìˆ˜ë¥¼ í†µí•´ ëª¨ë“ˆì„ loadí•  ìˆ˜ ìˆìŒ (ì˜ì¡´ì„±íŒ¨í‚¤ì§€, ëª¨ë“ˆ, jsoníŒŒì¼ë˜í•œ load ê°€ëŠ¥)
    
    Cì—ì„œ include, Javaì—ì„œ importì™€ ìœ ì‚¬
    
    ì˜ì¡´ì„± íŒ¨í‚¤ì§€, ì§ì ‘ ì‘ì„±í•œ ëª¨ë“ˆ ë“± ì‚¬ìš© ê°€ëŠ¥
    

<aside>
ğŸ‘‰ğŸ¾ `**require` ë™ì‘ì˜ ì´í•´ : require í•  ë•Œ ëª¨ë“ˆ ì½”ë“œê°€ ì‹¤í–‰ë¨**

Node.js ì˜ ëª¨ë“ˆì€ ì²« requireì‹œì— ì‹¤í–‰, ì´í›„ cache,

(ë‹¤ì‹œ requireí•  ë•Œ ì½”ë“œê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ)

ë”°ë¼ì„œ ëª¨ë“ˆ ì½”ë“œë¥¼ ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„  í•¨ìˆ˜í˜• ëª¨ë“ˆë¡œ ì‘ì„±

</aside>

- **npm íŒ¨í‚¤ì§€**ë¥¼ ëª¨ë“ˆë¡œì¨ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
    
    ì˜ì¡´ì„± íŒ¨í‚¤ì§€ë“¤ì€ requireì•ˆì— (package-name)ìœ¼ë¡œ loadí•  ìˆ˜ ìˆë‹¤
    
    íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ node_modulesì— ë‚´ë ¤ë°›ì•„ì ¸ ìˆì–´ì•¼ í•œë‹¤
    
- **ì§ì ‘ ì‘ì„±í•œ ëª¨ë“ˆ**
    
    ```jsx
    const myModule = require('./my-module');
    console.log(myModule);
    ```
    
    ìœ„ì˜ ê²½ìš° my-moduleì´ jsì¸ ê²½ìš° í•´ë‹¹ íŒŒì¼ load
    
    dirì¸ ê²½ìš° my-moduleì•ˆì˜ index.jsíŒŒì¼ load
    

### [ì‹¤ìŠµ] **í•¨ìˆ˜í˜• ëª¨ë“ˆ**

í•¨ìˆ˜í˜• ëª¨ë“ˆì€ loadí•œ ê²½ìš° **ëª¨ë“ˆì´ ë°”ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ**

í•„ìš”í•œ ì‹œì ì— loadëœ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ì—¬ ëª¨ë“ˆì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ

```jsx
const myFuctionModule = require('./my-function-module');
console.log(myFunctionModule(name,age,nationality));
```

ì˜ˆì œ) 

**conter.js**

```jsx
let count = 0;

module.exports = () => { return count += 1;}
```

**index.js**

```jsx
const counter = require('./counter');

for (let i = 0; i < 10; i++) {
    console.log(counter());
}
```

ì´ì²˜ëŸ¼ module.exportë¥¼ í•¨ìˆ˜í˜•ìœ¼ë¡œ ì‘ì„±í•´ì•¼ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ë§¤ë²ˆ ì´ˆê¸°í™”ë˜ë©°, ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° 1ì„ 10ë²ˆ ì¶œë ¥í•˜ê²Œ ëœë‹¤

- **jsoníŒŒì¼**
    
    ```jsx
    //my-data-jsonì„ ê°€ì§€ê³  ìˆìŒ
    const myData = require("./my-data");
    console.log(myData);
    ```
    
    objectë¡œ ìë™ íŒŒì‹±
    

## 06) ES Module

ES6ì—ì„œ ë“±ì¥í•œ JSì˜ ê³µì‹ì ì¸ í‘œì¤€ ëª¨ë“ˆ

JSëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“ˆì„ ì œê³µí•˜ê³  ìˆì§€ ì•Šì•˜ìœ¼ë‚˜ Node.jsëŠ” ë…ìì ì¸ ë°©ì‹ì„í†µí•´ ëª¨ë“ˆì„ ì§€ì›í•˜ê³  ìˆì—ˆë‹¤ (common.js)

ES Moduleì˜ ë“±ì¥ìœ¼ë¡œ Node.jsì—ì„œëŠ” ë‘ ê°€ì§€ ëª¨ë“ˆì„ ì§€ì›í•  í•„ìš”ê°€ ìƒê¹€

common.jsëŠ” module.exportsì™€ requireë¡œ ëª¨ë“ˆì„ ë§Œë“¤ê³  ì‚¬ìš©

ES Moduleì€ exportì™€ importë¡œ ëª¨ë“ˆì„ ë§Œë“¤ê³  ì‚¬ìš©

# 02 ì›¹ê³¼ Express.js

## 01) ì›¹ì˜ ì´í•´

World Wide Web

[ì›¹ì˜ ë™ì‘ ë°©ì‹ - Web ê°œë°œ í•™ìŠµí•˜ê¸° | MDN](https://developer.mozilla.org/ko/docs/Learn/Getting_started_with_the_web/How_the_Web_works)

## 02) ì›¹ì„œë¹„ìŠ¤ ë™ì‘ ë°©ì‹

< ì‚¬ìš©ì - (ì›¹ ë¸Œë¼ìš°ì €)í´ë¼ì´ì–¸íŠ¸ -(ì¸í„°ë„·) - HTTP - ì„œë²„ >ì˜ ìš”ì²­ê³¼ ì‘ë‹µì˜ ë°˜ë³µìœ¼ë¡œ ì´ë£¨ì–´ì§

ì •ì  ì›¹ : ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš©í•˜ì§€ ì•ŠëŠ” ë‹¨ë°©í–¥ í†µì‹ 

ë™ì  ì›¹ : ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš© í•˜ëŠ” ì–‘ë°©í–¥ í†µì‹ 

### CSR : client - sided - rendering

í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©ìê°€ í˜ì´ì§€ì—ì„œ ë³´ëŠ” ë™ì ì¸ ë¶€ë¶„ì„ ëŒ€ë¶€ë¶„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹

- í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œì— í˜ì´ì§€ ë¦¬ì†ŒìŠ¤ë“¤ì´ ë¯¸ë¦¬ ì •ì˜ë˜ì–´ ìˆê³  ì„œë²„ì™€ì˜ í†µì‹ ì€ APIë¥¼ ì´ìš©í•˜ì—¬ ë°ì´í„° ì „ë‹¬ (ì‚¬ìš©ì ì²´ê° ë¹ ë¦„)
- í° ê·œëª¨ í”„ë¡œì íŠ¸ ì í•©

### SSR : server -side - rendering

ë°±ì—”ë“œì—ì„œ í˜ì´ì§€ ëŒ€ë¶€ë¶„ì˜ ì˜ì—­ì„ ì²˜ë¦¬í•´ì„œ í”„ë¡ íŠ¸ì—”ë“œë¡œ ì „ë‹¬í•˜ëŠ” ë°©ì‹

- ë°±ì—”ë“œì—ì„œHTML íŒŒì¼ì„ ì‘ì„±í•´ì„œ í”„ë¡ íŠ¸ì—”ë“œë¡œ ì „ë‹¬, ë¡œë”©ì´ ì™„ë£Œë˜ë©´ í˜ì´ì§€ì™€ ë°ì´í„°ê°€ í•œ ë²ˆì— í‘œì‹œë¨ (ì‚¬ìš©ì ì²´ê° ëŠë¦¼)
- í˜ì´ì§€ ì´ë™ì‹œë§ˆë‹¤ ë‹¤ì‹œ HTMLíŒŒì¼ì„ ë¡œë”©í•˜ê¸° ë•Œë¬¸ì— í˜ì´ì§€ ê¹œë¹¡ì„
- CSRì— ë¹„í•´ ì‰¬ìš´ êµ¬ì„±, ì‘ì€ ê°œë°œì‚¬ì´ì¦ˆ

## 03) Express.js

Node.jsí”„ë ˆì„ì›Œí¬ ì¤‘ ê°€ì¥ ìœ ëª…í•œ ì›¹ í”„ë ˆì„ì›Œí¬

ëª¨ë“  ë™ì‘ì´ ëª…ì‹œì ìœ¼ë¡œ êµ¬ì„±

**npm initìœ¼ë¡œ ì‹œì‘í•˜ê¸°**

```jsx
$mkdir my-web
$cd my-web
$npm init
$npm i express

const express = require('express')
const app = express()

app.get('/',(req,res)=>{
	res.send('Hello World');
});

app.listen(3000);
```

### [ì‹¤ìŠµ] npm init ìœ¼ë¡œ express.js ì‹œì‘í•˜ê¸°

1. mkdir â†’ cdë¡œ ë””ë ‰í„°ë¦¬ ì´ë™ í›„ 
2. $ `npm init`
3. $ `npm install express` 
4. vscodeë“± ì½”ë“œ í¸ì§‘ê¸°ë¡œ ì ‘ì†í•´ index.js íŒŒì¼ì„ ë§Œë“  í›„ ë‚´ìš© ì‘ì„±
(localhost 3000ì„œë²„ì— ë¶€ì—¬)
    
    ![Untitled](%5B230911%5D%20npm%E1%84%80%E1%85%AA%20%E1%84%86%E1%85%A9%E1%84%83%E1%85%B2%E1%86%AF,%20Express%20810f68d91f5140cc8809a535758d22cd/Untitled%201.png)
    

1. package.json ì‘ì„±
    
    ![Untitled](%5B230911%5D%20npm%E1%84%80%E1%85%AA%20%E1%84%86%E1%85%A9%E1%84%83%E1%85%B2%E1%86%AF,%20Express%20810f68d91f5140cc8809a535758d22cd/Untitled%202.png)
    
2. ì´í›„ [localhost:3000](http://localhost:3000) ì„œë²„ ì˜¤í”ˆì‹œ ë‹¤ìŒê³¼ ê°™ì€ ì°½

![Untitled](%5B230911%5D%20npm%E1%84%80%E1%85%AA%20%E1%84%86%E1%85%A9%E1%84%83%E1%85%B2%E1%86%AF,%20Express%20810f68d91f5140cc8809a535758d22cd/Untitled%203.png)

1. cmd ë¡œ ëŒì•„ì™€ ctrl+cë¡œ ì„œë²„ ì¢…ë£Œ
    
    ![Untitled](%5B230911%5D%20npm%E1%84%80%E1%85%AA%20%E1%84%86%E1%85%A9%E1%84%83%E1%85%B2%E1%86%AF,%20Express%20810f68d91f5140cc8809a535758d22cd/Untitled%204.png)
    

### [ì‹¤ìŠµ] express-generatorë¡œ express.jsì‹œì‘í•˜ê¸°

express-generator ë¼ê³  í•˜ëŠ” í”„ë¡œì íŠ¸ ìƒì„±ê¸°ë¥¼ ì œê³µ

express-generatorë¥¼ ì‚¬ìš©í•˜ë©´ í”„ë¡œì íŠ¸ì˜ ê¸°ë³¸êµ¬ì¡°ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì¤Œ

ìƒì„±ëœ í”„ë¡œì íŠ¸ëŠ” `npm start`ë¡œ ì‹¤í–‰ ê°€ëŠ¥

```jsx
$npm i -g express-generator
$express my-web
$cd my-web
$npm install
$npm start
```

### npxë¥¼ ì‚¬ìš©í•˜ì—¬ express-generatorë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šê³  ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥

express-generatorëŠ” í”„ë¡œì íŠ¸ ìƒì„± ì´í›„ì—” ì‚¬ìš©ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— npxë¥¼ í•˜ëŠ” ê²ƒë„ ì¢‹ì€ ë°©ë²•

```jsx
$npx express-generator my-web
$cd my-web
$npm i
$npm start
```

<aside>
ğŸ‘‰ğŸ¾ **[npmê³¼ npxì˜ ì°¨ì´ì— ëŒ€í•´ì„œ](https://ljh86029926.gitbook.io/coding-apple-react/undefined/npm-npx) :** ê¸€ë¡œë²Œ ëª¨ë“ˆì„ ì„¤ì¹˜í•˜ì§€ ì•Šê¸° ìœ„í•œ ëª¸ë¶€ë¦¼

</aside>

## 04) Express.jsì˜ êµ¬ì¡°

Express.jsì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¡°

| app.js | Express ì• í”Œë¦¬ì¼€ì´ì…˜ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì„¤ì •, ë¼ìš°íŒ… ë° ë¯¸ë“¤ì›¨ì–´ ì„¤ì • |
| --- | --- |
| bin/www | ì‹œì‘í•˜ê¸° ìœ„í•œ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ (ì´ íŒŒì¼ì„ ì‹¤í–‰í•˜ë©´ Express ì„œë²„ê°€ ì‹œì‘) |
| package.json | ì˜ì¡´ì„± ë° êµ¬ì„± ì •ë³´ í¬í•¨ íŒŒì¼ |
| public | ì •ì  íŒŒì¼(ì´ë¯¸ì§€, CSS, JavaScript íŒŒì¼ ë“±)ì„ í˜¸ìŠ¤íŒ…ì‹œ ì‚¬ìš© |
| routes | ë¼ìš°íŒ… ì½”ë“œë¥¼ ëª¨ë“ˆí™”í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” í´ë”.  app.jsì—ì„œ app.useë¥¼ ì‚¬ìš©í•˜ì—¬ ë“±ë¡ |
| views | HTMLë˜ëŠ” í…œí”Œë¦¿ ì—”ì§„ì„ ì´ìš©í•´ ë§Œë“  ë·° í…œí”Œë¦¿ íŒŒì¼  |

## 05) Express.js ë™ì‘ ë°©ì‹

1. localhost:3000ì ‘ì† 
2. app.js â‡’ app.use(â€™/â€™,index.Router);
3. routes/index.js â‡’ router.get(â€™/â€™,â€¦
4. routes/index.jsâ‡’res.render(â€™indexâ€™,â€¦
5. views/index.jade

### app.js

app.jsì—ì„œëŠ” express()ë¡œ ìƒì„±ë˜ëŠ” appê°ì²´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ

app ê°ì²´ëŠ” Express.jsì˜ ê¸°ëŠ¥ì„ ë‹´ì€ ê°ì²´ (Expressì˜ ëª¨ë“  ë™ì‘ì€ appê°ì²´ì— ì •ì˜ë¨)

**app.js ì£¼ìš” ê¸°ëŠ¥**

| app.use() | í•¨ìˆ˜ | middlewareë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ |
| --- | --- | --- |
| app.listen() | í•¨ìˆ˜ | httpì„œë²„ë¥¼ ìƒì„±í•´ì£¼ëŠ” í•¨ìˆ˜
express-generatorë¥¼ ì‚¬ìš©í•˜ë©´ http.createServerë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, app.listení•¨ìˆ˜ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆìŒ |
| app.locals | ê³µí†µ ìƒìˆ˜ | Express.jsì—ì„  globalë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ì§€ ì•Šê³  ì´ ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ |

app ë¼ìš°íŒ…

app ê°ì²´ì— ì§ì ‘ get, post, put, deleteí•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ HTTP methodë¡œ ë¼ìš°íŒ…í•  ìˆ˜ ìˆìŒ

```jsx
app.get('/',(req,res)=>{
	res.send('GET /');
})

app.post('/', (req,res)=>{
	res.send('POST /');
})

app.put('/', (req,res)=>{
	res.send('PUT /');
})

app.delete('/',(res,req)=>{
	res.send('delete /');
})

app.all('/all', (req,res)=>{
	res.send('ANY /');
})
```

ìœ„ ì½”ë“œì—ì„œ **`/`**ëŠ” URL ê²½ë¡œ

ex)  PUT ìš”ì²­ì´ **`/`** ê²½ë¡œë¡œ ë“¤ì–´ì˜¤ë©´ **`(req, res) => { ... }`** ì½œë°±í•¨ìˆ˜ ì‹¤í–‰,
**'PUT /'ë¼ëŠ” í…ìŠ¤íŠ¸ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µìœ¼ë¡œ** ë³´ëƒ„

all í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ HTTP methodì— ìƒê´€ì—†ì´ ë¼ìš°íŒ… ê°€ëŠ¥

appë¼ìš°íŒ…ì„ í†µí•´ì„œëŠ” ë¼ìš°íŒ…ì˜ í•µì‹¬ì¸ ê·¸ë£¹í™”ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŒ

### Express.Router ëª¨ë“ˆ

router ê°ì²´ì—ë„ appê°ì²´ì²˜ëŸ¼ get, put, post, delete í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ

app ì˜ í•¨ìˆ˜ì™€ ë™ì¼í•œ ë™ì‘ì„ í•˜ëŠ” í•¨ìˆ˜ë¡œ ì²« ë²ˆì§¸ ì¸ìê°€ ë¼ìš°íŒ…ì´ ë  URLì´ê³ , ë§ˆì§€ë§‰ ì¸ìê°€ ë¼ìš°íŒ…ì‹œ ì‹¤í–‰ë  í•¨ìˆ˜

ë¼ìš°í„°ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ëª¨ë“ˆë¡œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©

```jsx
const express = require('express');
const router = express.Router();

router.get('/', (req,res,next)=>{
	res.send('respond with a resource');
});
//(req, res, next) => { ... }: ìš”ì²­(req), ì‘ë‹µ(res), nextë¥¼ ì¸ìë¡œ ë°›ëŠ” ë¼ìš°í„° í•¸ë“¤ëŸ¬ í•¨ìˆ˜
module.exports = router;
```

**routerê°ì²´ì—ë„ í•˜ìœ„ ë¼ìš°í„°ë¥¼ useí•¨ìˆ˜ë¡œ ì—°ê²°**í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ

```jsx
// ___ ./app/js
const userRouter = require('./routes/users');
const app = express();

app.use('/users',userRouter);

// ___ ./routes/users.js
const petRouter = require('./pets');
const router = express.Router();

router.use('/pets', petRouter);
///pets ê²½ë¡œë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ petRouter ë¼ìš°í„°ë¥¼ ì‚¬ìš©
module.exports = router;
```

### ë¼ìš°íŒ… - path parameter

Express.jsë¼ìš°íŒ…ì€ path parameterì œê³µ

path parameterë¥¼ ì‚¬ìš©í•˜ë©´, **ì£¼ì†Œì˜ ì¼ë¶€ë¥¼ ë³€ìˆ˜ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ**

### Request Handler

ë¼ìš°íŒ…ì— ì ìš©ë˜ëŠ” í•¨ìˆ˜ë¥¼ Request Handlerë¼ê³  ë¶€ë¦„

HTTP **ìš”ì²­ê³¼ ì‘ë‹µ**ì„ ë‹¤ë£° ìˆ˜ ìˆëŠ” í•¨ìˆ˜

ì„¤ì •ëœ **ë¼ìš°íŒ… ê²½ë¡œì— í•´ë‹¹í•˜ëŠ” ìš”ì²­**ì´ ë“¤ì–´ì˜¤ë©´ Request Handler**í•¨ìˆ˜ê°€ ì‹¤í–‰**ë¨

```jsx
router.get('/:id',**(req,res)=>{
	const id = req.params.id
	res.send('hello ${id}');
}**)
```

routerë‚˜ appì˜ HTTP method í•¨ìˆ˜ì˜ **ê°€ì¥ ë§ˆì§€ë§‰ ì¸ìë¡œ ì „ë‹¬ë˜ëŠ” í•¨ìˆ˜**

### Request Handler - Request ê°ì²´ì˜ ì£¼ìš” ê°’ ë° í•¨ìˆ˜

| req.params | URLí‘œí˜„ ì¤‘ /path/:idì—ì„œ :idë¥¼ req.params.idë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ |
| --- | --- |
| req.queries | URLí‘œí˜„ ì¤‘ /path?page=2ì—ì„œ pageë¶€ë¶„ì„ req.queries.pageë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ |
| req.body | req.bodyì— ìš”ì²­ ë°ì´í„°ê°€ ì €ì¥ë˜ì–´ ë“¤ì–´ì˜´ |
| req.get("") | HTTP Requestì˜ í—¤ë” ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ
req.get('Authorization') ë“±ìœ¼ë¡œ ê°’ì„ ê°€ì ¸ì˜´ |

### Request Handler - Response ê°ì²´ì˜ ì£¼ìš” ê°’ ë° í•¨ìˆ˜

HTTPì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” ê°ì²´

HTTPì‘ë‹µì˜ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê±°ë‚˜ ì‘ë‹µìƒíƒœ ë° í—¤ë” ì„¤ì •

| req.send() | text í˜•ì‹ì˜ HTTP ì‘ë‹µì„ ì „ì†¡ |
| --- | --- |
| req.json() | json í˜•ì‹ì˜ HTTPì‘ë‹µì„ ì „ì†¡ |
| req.render() | HTML Templateì„ ì‚¬ìš©í•˜ì—¬ í™”ë©´ì„ ì „ì†¡ |
| res.set() | HTTP ì‘ë‹µì˜ í—¤ë”ë¥¼ ì„¤ì • |
| req.status() | HTTPì‘ë‹µì˜ ìƒíƒœ ê°’ ë“±ì„ ì„¤ì • |

Express.jsëŠ” appê°ì²´ë¥¼ ì‹œì‘ìœ¼ë¡œ ëª¨ë“  ë™ì‘ì´ ì´ë£¨ì–´ì§

**appê°ì²´**ë‚˜ **Express.Router**ë¥¼ ì‚¬ìš©í•˜ì—¬ **ë¼ìš°íŒ…**(ìš”ì²­ëœ URL ê²½ë¡œì™€ HTTP ë©”ì„œë“œì— ë”°ë¼ ì–´ë–¤ ì½”ë“œë¥¼ ì‹¤í–‰í•  ê²ƒì¸ì§€ ê²°ì •í•˜ëŠ” ê²ƒ) ì„ **êµ¬í˜„**í•  ìˆ˜ ìˆìŒ

Request Handlerë¥¼ í†µí•´ HTTP ìš”ì²­ê³¼ ì‘ë‹µì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ

### [ì‹¤ìŠµ] path parameter ì‚¬ìš©í•˜ê¸°

```jsx
const express = require('express');

const app = express();

app.get('/', (req, res) => {
    res.send("OK");
});

// path parameter ì‚¬ìš©í•˜ê¸°
app.get('/say/:greeting', (req, res) => {
    const { greeting } = req.params;
    res.send(greeting);
});

app.listen(8080);
```

- ì½”ë“œ ì„¤ëª…
    1. **`/`** ê²½ë¡œë¡œ GET ìš”ì²­ì´ ì˜¤ë©´ "OK"ë¼ëŠ” ë¬¸ìì—´ì„ ì‘ë‹µìœ¼ë¡œ ë³´ëƒ…ë‹ˆë‹¤.
    2. **`/say/:greeting`** ê²½ë¡œë¡œ GET ìš”ì²­ì´ ì˜¤ë©´ **`:greeting`** ë¶€ë¶„ì— ë“¤ì–´ì˜¨ ê°’ì„ ì‘ë‹µìœ¼ë¡œ ë³´ëƒ…ë‹ˆë‹¤.
    3. . ì˜ˆë¥¼ ë“¤ì–´, **`GET http://localhost:8080/say/hello`**ë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ "hello"ë¼ëŠ” ì‘ë‹µì„ ë°›ì„ ê²ƒì…ë‹ˆë‹¤
    4. **`/say/hello`**ì˜ ê²½ìš° **`hello`**ê°€ **`:greeting`** íŒŒë¼ë¯¸í„°ì— í•´ë‹¹í•˜ë©°, **`/say/goodbye`**ì˜ ê²½ìš° **`goodbye`**ê°€ **`:greeting`** íŒŒë¼ë¯¸í„°ì— í•´ë‹¹í•©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ í•¨ìˆ˜ì—ì„œ ì´ ê°’ì„ ì½ì–´ì˜µë‹ˆë‹¤.
    

### [ì‹¤ìŠµ] ê³„ì¸µì  êµ¬ì¡°ì˜ ****Router ì‚¬ìš©í•˜ê¸°****

**`./routes/users.js`**Â íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬, â€˜/users/:userId/petsâ€™ ê²½ë¡œì— petsRouter ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

petsRouterë¥¼ ì—°ê²°í•˜ê¸° ìœ„í•´ petsRouterë¥¼ ëª¨ë“ˆë¡œ í˜¸ì¶œ

---

**users.js**

1. **petsRouter** ëŠ” ì•± ê°ì²´ì— ì—°ê²°í•˜ì§€ ì•Šê³ ,**usersRouter í•˜ìœ„ì— ì—°ê²°í•˜ë„ë¡ êµ¬ì„±**í•©ë‹ˆë‹¤.
2. pets ë¼ìš°í„°ë¥¼ users ë¼ìš°í„°ì— ì—°ê²°í•  ë•Œ, path parameter ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ë¡œë¥¼ ì¶”ê°€í•˜ì—¬ â€œ/users/:userId/petsâ€ ì´í•˜ì˜ ëª¨ë“  ìš”ì²­ì„ pets ë¼ìš°í„°ê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.

```jsx
const { Router } = require('express');
**const petsRouter = require('./pets');**
const router = Router();

router.get('/', (req, res) => {
    res.send('GET /users');
});

**router.use('/:userId/pets', petsRouter);**

module.exports = router;
```

---

**pets.js**

1. pets ë¼ìš°í„°ëŠ” â€œGET /users/:userId/petsâ€ë¼ëŠ” ìš”ì²­ì— ëŒ€í•´ â€œPets of user {userId}â€ ë¼ëŠ” ë¬¸ìì—´ì„ HTTP ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ì£¼ë„ë¡ ì¶”ê°€ í•©ë‹ˆë‹¤.
    
    ì˜ˆë¥¼ë“¤ì–´, â€œGET /users/15/petsâ€ ë¼ëŠ” ìš”ì²­ì— í•´ë‹¹í•˜ëŠ” ì‘ë‹µì€â€œPets of user 15â€ ê°€ ì¶œë ¥ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
    

```jsx
const { Router } = require('express');
const router = Router({ mergeParams:true });
//ë¶€ëª¨ ë¼ìš°í„°ì˜ íŒŒë¼ë¯¸í„°ë¥¼ í•˜ìœ„ ë¼ìš°í„°ì—ì„œ ê³µìœ í•  ìˆ˜ ìˆë‹¤(userIdë¥¼ í•¨ê»˜ ì‚¬ìš© ê°€ëŠ¥)

**router.get('/',(req,res)=>{
    const {userId} = req.params;
    res.send(`Pets of user ${userId}`);
})**

module.exports = router;
```

`const petsRouter = require('./pets');` ì½”ë“œëŠ” `petsRouter`ë¥¼ Express.js ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•˜ìœ„ ë¼ìš°í„°ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“­ë‹ˆë‹¤. ì¦‰, `petsRouter`ëŠ” `./pets` íŒŒì¼ì—ì„œ ì •ì˜ëœ Express ë¼ìš°í„°ì…ë‹ˆë‹¤.